{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["import axios from 'axios';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nconst my_api = '47359796-f2fd064881319509e162de268';\r\nconst searchInput = document.querySelector('.search-input');\r\nconst searchBtn = document.querySelector('.search-button');\r\nconst images = document.querySelector('.images');\r\nconst loadingMessage = document.querySelector('.loading-message');\r\nconst loadMoreBtn = document.querySelector('.loadmore-button');\r\n\r\nlet page = 1;\r\nconst perPage = 40;\r\nlet lightbox;\r\nlet totalImages = 0;\r\n\r\nasync function fetchImages() {\r\n  try {\r\n    const response = await axios.get('https://pixabay.com/api/', {\r\n      params: {\r\n        key: my_api,\r\n        q: searchInput.value,\r\n        image_type: 'photo',\r\n        per_page: perPage,\r\n        page: page,\r\n      },\r\n    });\r\n\r\n    const data = response.data;\r\n    totalImages += data.hits.length;\r\n    if (data.hits.length === 0 && page === 1) {\r\n      iziToast.error({\r\n        message:\r\n          'Sorry, there are no images matching your search query. Please try again!',\r\n        position: 'topRight',\r\n      });\r\n      loadMoreBtn.style.display = 'none';\r\n      return;\r\n    } else if (totalImages >= data.totalHits) {\r\n      loadMoreBtn.style.display = 'none';\r\n      iziToast.info({\r\n        message: `We're sorry, but you've reached the end of search results.`,\r\n        position: 'topRight',\r\n      });\r\n    } else {\r\n      loadMoreBtn.style.display = 'block';\r\n    }\r\n    const markup = data.hits\r\n      .map(image => {\r\n        return `\r\n        <li class=\"image\">\r\n            <a class=\"image-link\" href=\"${image.largeImageURL}\"><img class=\"img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></a>\r\n            <div class=\"image-info\">\r\n              <p class=\"image-desc\">\r\n               <span class=\"desc title\">Likes</span> \r\n               <span class=\"desc value\">${image.likes}</span> \r\n              </p>\r\n              <p class=\"image-desc\">\r\n               <span class=\"desc title\">Views</span> \r\n               <span class=\"desc value\">${image.views}</span> \r\n              </p>\r\n              <p class=\"image-desc\">\r\n               <span class=\"desc title\">Comments</span> \r\n               <span class=\"desc value\">${image.comments}</span>\r\n              </p>\r\n              <p class=\"image-desc\">\r\n               <span class=\"desc title\">Downloads</span> \r\n               <span class=\"desc value\">${image.downloads}</span>\r\n              </p>\r\n            </div>\r\n        </li>\r\n        `;\r\n      })\r\n      .join('');\r\n\r\n    images.insertAdjacentHTML('beforeend', markup);\r\n\r\n    if (lightbox) {\r\n      lightbox.destroy();\r\n    }\r\n\r\n    lightbox = new SimpleLightbox('.image a', {\r\n      captionsData: 'alt',\r\n      captionDelay: 250,\r\n      captionPosition: 'bottom',\r\n      backgroundColor: 'red',\r\n    });\r\n\r\n    lightbox.refresh();\r\n  } catch (error) {\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: `An error occurred: ${error.message}`,\r\n      position: 'topRight',\r\n      backgroundColor: 'red',\r\n    });\r\n  } finally {\r\n    loadingMessage.style.display = 'none';\r\n  }\r\n}\r\n\r\nsearchBtn.addEventListener('click', async e => {\r\n  e.preventDefault();\r\n  searchInput.value = searchInput.value.trim();\r\n  images.innerHTML = '';\r\n  page = 1;\r\n  totalImages = 0;\r\n  loadingMessage.style.display = 'block';\r\n  await fetchImages();\r\n});\r\n\r\nloadMoreBtn.addEventListener('click', async () => {\r\n  page++;\r\n  loadingMessage.style.display = 'block';\r\n  await fetchImages();\r\n});\r\n"],"names":["my_api","searchInput","searchBtn","images","loadingMessage","loadMoreBtn","page","perPage","lightbox","totalImages","fetchImages","data","axios","iziToast","markup","image","SimpleLightbox","error","e"],"mappings":"owBAMA,MAAMA,EAAS,qCACTC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAc,SAAS,cAAc,kBAAkB,EAE7D,IAAIC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIC,EACAC,EAAc,EAElB,eAAeC,GAAc,CAC3B,GAAI,CAWF,MAAMC,GAVW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKZ,EACL,EAAGC,EAAY,MACf,WAAY,QACZ,SAAUM,EACV,KAAMD,CACP,CACP,CAAK,GAEqB,KAEtB,GADAG,GAAeE,EAAK,KAAK,OACrBA,EAAK,KAAK,SAAW,GAAKL,IAAS,EAAG,CACxCO,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EACDR,EAAY,MAAM,QAAU,OAC5B,MACN,MAAeI,GAAeE,EAAK,WAC7BN,EAAY,MAAM,QAAU,OAC5BQ,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,GAEDR,EAAY,MAAM,QAAU,QAE9B,MAAMS,EAASH,EAAK,KACjB,IAAII,GACI;AAAA;AAAA,0CAE2BA,EAAM,aAAa,2BAA2BA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,0CAIpFA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,0CAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,SAKlD,EACA,KAAK,EAAE,EAEVZ,EAAO,mBAAmB,YAAaW,CAAM,EAEzCN,GACFA,EAAS,QAAO,EAGlBA,EAAW,IAAIQ,EAAe,WAAY,CACxC,aAAc,MACd,aAAc,IACd,gBAAiB,SACjB,gBAAiB,KACvB,CAAK,EAEDR,EAAS,QAAO,CACjB,OAAQS,EAAO,CACdJ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sBAAsBI,EAAM,OAAO,GAC5C,SAAU,WACV,gBAAiB,KACvB,CAAK,CACL,QAAY,CACRb,EAAe,MAAM,QAAU,MAChC,CACH,CAEAF,EAAU,iBAAiB,QAAS,MAAMgB,GAAK,CAC7CA,EAAE,eAAc,EAChBjB,EAAY,MAAQA,EAAY,MAAM,KAAI,EAC1CE,EAAO,UAAY,GACnBG,EAAO,EACPG,EAAc,EACdL,EAAe,MAAM,QAAU,QAC/B,MAAMM,EAAW,CACnB,CAAC,EAEDL,EAAY,iBAAiB,QAAS,SAAY,CAChDC,IACAF,EAAe,MAAM,QAAU,QAC/B,MAAMM,EAAW,CACnB,CAAC"}